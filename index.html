<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>OptiCheck Clinical Vision Analyzer</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>

body{
margin:0;
background:#000814;
color:#00e5ff;
font-family:Rajdhani;
}

.machine{
max-width:900px;
margin:auto;
margin-top:20px;
background:#001d3d;
border-radius:10px;
box-shadow:0 0 50px #00e5ff;
padding:20px;
}

/* HEADER */

.header{
font-family:Orbitron;
font-size:40px;
text-align:center;
color:#00e5ff;
text-shadow:0 0 20px #00e5ff;
}

/* SCREEN */

.screen{
background:#000;
padding:20px;
border-radius:10px;
margin-top:20px;
min-height:300px;
text-align:center;
position:relative;
overflow:hidden;
}

.scanline{
position:absolute;
width:100%;
height:3px;
background:#00e5ff;
animation:scan 2s linear infinite;
}

@keyframes scan{
0%{top:0;}
100%{top:100%;}
}

/* LETTER */

.letter{
font-family:Share Tech Mono;
font-size:120px;
margin-top:50px;
}

/* INPUT */

input{
background:#000;
border:1px solid #00e5ff;
color:#00e5ff;
font-size:20px;
padding:10px;
width:200px;
text-align:center;
}

/* BUTTON */

button{
background:#00e5ff;
border:none;
padding:12px;
margin:10px;
font-family:Orbitron;
cursor:pointer;
}

/* METERS */

.meter{
height:15px;
background:#000;
margin:10px;
}

.fill{
height:100%;
background:#00e5ff;
width:0%;
}

/* RESULTS */

.report{
font-family:Share Tech Mono;
text-align:left;
white-space:pre-line;
}

.credit{
text-align:center;
margin-top:20px;
font-size:14px;
}

.warning{
background:red;
color:white;
padding:10px;
text-align:center;
margin-top:10px;
}

</style>
</head>
<body>

<div class="machine">

<div class="header">OPTiCHECK CLINICAL ANALYZER</div>

<div class="warning">
Simulation only — not real medical diagnosis
</div>

<div class="screen" id="screen">

<div class="scanline"></div>

<div id="content">

<button onclick="start()">START CLINICAL SCAN</button>

</div>

</div>

<div>

Focus Accuracy

<div class="meter">
<div class="fill" id="focusMeter"></div>
</div>

Eye Strain

<div class="meter">
<div class="fill" id="strainMeter"></div>
</div>

</div>

<div class="credit">
Created by: Maahir Gani • Isa Suliman • Daanyaal Miya
</div>

</div>

<script>

const letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ";

let eye="LEFT";
let index=0;
let total=0;
let correct=0;
let strain=0;

let resultsLEFT=[];
let resultsRIGHT=[];

function start(){

eye="LEFT";
index=0;
total=0;
correct=0;
strain=0;

showLetter();

}

function showLetter(){

let blur=index*0.5;

let letter=letters[Math.floor(Math.random()*letters.length)];

current=letter;

document.getElementById("content").innerHTML=`

TESTING ${eye} EYE

<div class="letter" style="filter:blur(${blur}px)">
${letter}
</div>

<input id="input">

<button onclick="submit()">CONFIRM</button>

`;

}

function submit(){

let ans=document.getElementById("input").value.toUpperCase();

total++;

if(ans===current){

correct++;

if(eye=="LEFT")
resultsLEFT.push("✔ "+current);
else
resultsRIGHT.push("✔ "+current);

}else{

strain+=5;

if(eye=="LEFT")
resultsLEFT.push("✖ "+current+" ("+ans+")");
else
resultsRIGHT.push("✖ "+current+" ("+ans+")");

}

updateMeters();

index++;

if(index>=10){

if(eye=="LEFT"){

eye="RIGHT";
index=0;
showLetter();

}else{

finish();

}

}else{

showLetter();

}

}

function updateMeters(){

let focus=(correct/total)*100;

document.getElementById("focusMeter").style.width=focus+"%";

document.getElementById("strainMeter").style.width=strain+"%";

}

function finish(){

let sphLEFT=calc(resultsLEFT);
let sphRIGHT=calc(resultsRIGHT);

document.getElementById("content").innerHTML=`

CLINICAL REPORT

<div class="report">

LEFT EYE SPH: ${sphLEFT}

RIGHT EYE SPH: ${sphRIGHT}

DETAIL LEFT:
${resultsLEFT.join("\n")}

DETAIL RIGHT:
${resultsRIGHT.join("\n")}

</div>

<button onclick="start()">NEW SCAN</button>

`;

}

function calc(results){

let wrong=results.filter(x=>x.includes("✖")).length;

let sph=(wrong*0.25).toFixed(2);

return "-"+sph;

}

</script>

</body>
</html>